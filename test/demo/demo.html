<!DOCTYPE HTML>
<html>
<head>
	<script type="text/javascript" src="../../LinewiseFileReader/LinewiseFileReader.js"></script>
	<script type="text/javascript" src="../../CsvParser/CsvParser.js"></script>
	<script type="text/javascript" src="../../CsvFileReader.js"></script>
	<script type="text/javascript">
	//<![CDATA[
		function read50lines (file) 
		{
		
			var lineOut = document.getElementById("lines");
			
			var limit = 10;
			
			var reader = new CsvFileReader(",");
			reader.onload = function (load) 
			{
				console.info("load",load);
				return this.data.length < limit;
			};
			reader.onloadend = function (loadend) 
			{
				console.info("end",loadend);
				
				var data = this.data.slice(0, limit) , lineCount = data.length;
				var linesHTML = "<h2>"+ (loadend.loaded < loadend.total ? "first "+ lineCount : "" ) +" lines from file</h2><table border=1>";
				for ( var l=0 ; l < lineCount ; ++l )
				{
					linesHTML += "<tr><td>"+ data[l].join("</td><td>") +"</td></tr>";
				}				
				
				lineOut.innerHTML = linesHTML +"</table>";
			};
			
			lineOut.innerHTML = "loading&hellip;";
			
			reader.read(file);
		};
	//]]>
	</script>
</head>
<body>
	<h1>CSV FileReader demo</h1>
	
	<h2></h2>
	<input type="file" onchange="read50lines(this.files[0])" />
	
	<br /><hr />
	
	<div id="lines">!! select a file !!</div>
</body>
</html>